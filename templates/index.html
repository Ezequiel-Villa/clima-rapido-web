<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Clima r√°pido</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- CSS -->
  <link rel="stylesheet" href="/static/css/style.css" />
</head>
<body>
  <div class="container">
    <!-- Encabezado -->
    <header class="header">
      <div class="header-left">
        <span class="badge">Eze-Weather</span>
        <h1>üå§Ô∏è Clima al Instante</h1>
      </div>
      <div class="header-right">
        <!-- Reloj local (del navegador) -->
        <div class="clock" id="clock-local" title="Hora local">--:--:--</div>
      </div>
    </header>

    <!-- Tarjeta principal -->
    <section class="card">
      <!--
        Formulario con:
        - action="/weather" = fallback cl√°sico si JS est√° desactivado
        - id="form-weather" = para interceptar el submit en JS y evitar recarga
        - Validaciones HTML5 + patr√≥n permisivo (letras, acentos, espacios, n√∫meros, comas, puntos, guiones, ap√≥strofes)
      -->
      <form id="form-weather" method="POST" action="/weather" novalidate>
        <div class="row">
          <div>
            <label for="city">Ciudad</label>
            <input
              id="city"
              name="city"
              type="text"
              placeholder="Ej. Tijuana, MX"
              autocomplete="address-level2"
              required
              maxlength="80"
              pattern="^[\\p{L}\\p{M}0-9\\s,'\\.\\-]{1,80}(,\\s?[A-Za-z]{2})?$"
              title="Ejemplo v√°lido: 'Tijuana' o 'Tijuana, MX'"
            />
            <small id="city-help" class="muted">
              Formato sugerido: <b>Ciudad</b> o <b>Ciudad, C√≥digo de pa√≠s</b> ‚Äî ej. <em>Tijuana, MX</em>.
            </small>
            <div id="city-error" class="field-error" aria-live="polite"></div>
          </div>

          <div>
            <label for="units">Unidades</label>
            <select id="units" name="units">
              <option value="metric" selected>M√©trico (¬∞C)</option>
              <option value="imperial">Imperial (¬∞F)</option>
            </select>
          </div>

          <div>
            <label for="lang">Idioma</label>
            <select id="lang" name="lang">
              <option value="es" selected>Espa√±ol</option>
              <option value="en">Ingl√©s</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <button type="submit" aria-describedby="city-help">
            <span class="btn-label">Consultar clima</span>
          </button>
          <span class="muted tip">Tip: ‚ÄúCiudad, C√≥digo de pa√≠s‚Äù (Tijuana, MX)</span>
        </div>
      </form>

      <!-- Resultado din√°mico (clima actual) -->
      <div id="result" class="result muted" aria-live="polite">
        Sin resultados a√∫n. Ingresa una ciudad y consulta.
      </div>

      <!-- Pron√≥stico 5 d√≠as (se inserta por JS) -->
      <div id="forecast" aria-live="polite"></div>
    </section>

    <!-- Historial de b√∫squedas (se inserta por JS) -->
    <div id="history-root"></div>
  </div>

  <!-- JS (AJAX). Si quitas este script, el formulario caer√° al modo cl√°sico con recarga -->
  <script defer src="/static/js/app.js"></script>

  <noscript>
    <div class="noscript-note">
      JavaScript desactivado: usar√°s el modo cl√°sico (la p√°gina se recarga y el servidor renderiza el resultado).
    </div>
  </noscript>
</body>
</html>

